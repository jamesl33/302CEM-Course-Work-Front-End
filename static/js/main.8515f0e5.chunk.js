(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{145:function(e,t,n){},162:function(e,t,n){e.exports=n(314)},167:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},186:function(e,t,n){},283:function(e,t,n){},284:function(e,t,n){},285:function(e,t,n){},311:function(e,t){},314:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(46),o=n.n(s),i=(n(167),n(22)),c=n.n(i),h=n(37),l=n(17),d=n(18),p=n(21),u=n(19),m=n(20),T=n(1),f=n(29),b=(n(181),n(182),n(183),n(184),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).shortener=n.shortener.bind(Object(T.a)(Object(T.a)(n))),n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"shortener",value:function(){if(this.props.children.toString().length>4){var e=this.props.children/1e3;return console.log(e),e=e.toString().split(".",1),"".concat(e,"k")}return this.props.children}},{key:"render",value:function(){return a.a.createElement("div",{className:"valueDisplay ".concat(this.props.css)},this.shortener())}}]),t}(r.Component)),v=(n(185),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).handleButtonClick=n.handleButtonClick.bind(Object(T.a)(Object(T.a)(n))),n.handleCSS=n.handleCSS.bind(Object(T.a)(Object(T.a)(n))),n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"handleButtonClick",value:function(e){e.stopPropagation(),this.props.disabled||this.props.clickMethod()}},{key:"handleCSS",value:function(){return"+"===this.props.children?"green":"-"===this.props.children?"red":void 0}},{key:"render",value:function(){var e=this.handleCSS();return a.a.createElement("div",{onClick:this.handleButtonClick,className:"btn-wrapper ".concat(e)},this.props.children)}}]),t}(r.Component)),k=(n(186),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).shortener=n.shortener.bind(Object(T.a)(Object(T.a)(n))),n.determineCSS=n.determineCSS.bind(Object(T.a)(Object(T.a)(n))),n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"shortener",value:function(){if(this.props.children.toString().length>4){var e=this.props.children/1e3;return console.log(e),e=e.toString().split(".",1),"".concat(e,"k")}return this.props.children}},{key:"determineCSS",value:function(){return this.props.children<5e5?"dark":"light"}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("h1",{className:"data ".concat(this.props.css)},this.shortener()),a.a.createElement("h3",{className:this.props.css},"Activation Threshold"),a.a.createElement("div",{className:"adjuster"},a.a.createElement(v,{clickMethod:this.props.decrementThreshold,disabled:!1},"-"),a.a.createElement(b,{css:this.props.css},this.props.threshold),a.a.createElement(v,{clickMethod:this.props.incrementThreshold,disabled:!1},"+")))}},{key:"componentDidMount",value:function(){this.props.parentCSS(this.determineCSS())}},{key:"componentDidUpdate",value:function(e){this.props.children!==e.children&&this.props.parentCSS(this.determineCSS())}}]),t}(r.Component)),g=n(26),j=n(14),O=(n(145),n(283),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).state={chartData:new j.TimeSeries({name:"Historical Light",columns:["time","light"],points:[[new Date,0]]})},n.handleModalExitClick=n.handleModalExitClick.bind(Object(T.a)(Object(T.a)(n))),n.handleModalContentClick=n.handleModalContentClick.bind(Object(T.a)(Object(T.a)(n))),n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"handleModalExitClick",value:function(e){this.props.onModalExitClick()}},{key:"handleModalContentClick",value:function(e){return e.stopPropagation(),null}},{key:"render",value:function(){return a.a.createElement("div",{className:"modal",onClick:this.handleModalExitClick},a.a.createElement("div",{className:"modalContent",onClick:this.handleModalContentClick},a.a.createElement(g.ChartContainer,{timeRange:this.state.chartData.range(),title:"Historical Light Level",titleStyle:{fill:"#555",fontWeight:500}},a.a.createElement(g.ChartRow,null,a.a.createElement(g.YAxis,{id:"light",label:"Light Level",min:this.state.chartData.min("light"),max:this.state.chartData.max("light")}),a.a.createElement(g.Charts,null,a.a.createElement(g.LineChart,{axis:"light",series:this.state.chartData,columns:["light"]}))))))}},{key:"componentDidMount",value:function(){var e=this;this.props.getHistory("light",function(t,n){t||e.setState({chartData:new j.TimeSeries({name:"Historical Light",columns:["time","light"],points:n})})})}}]),t}(r.Component)),y=(n(284),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).state={chartData:new j.TimeSeries({name:"Historical Temperatures",columns:["time","temperature"],points:[[new Date,0]]})},n.handleModalExitClick=n.handleModalExitClick.bind(Object(T.a)(Object(T.a)(n))),n.handleModalContentClick=n.handleModalContentClick.bind(Object(T.a)(Object(T.a)(n))),n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"handleModalExitClick",value:function(e){this.props.onModalExitClick()}},{key:"handleModalContentClick",value:function(e){return e.stopPropagation(),null}},{key:"render",value:function(){return a.a.createElement("div",{className:"modal",onClick:this.handleModalExitClick},a.a.createElement("div",{className:"modalContent",onClick:this.handleModalContentClick},a.a.createElement(g.ChartContainer,{timeRange:this.state.chartData.timerange(),title:"Historical Temperature Level",titleStyle:{fill:"#555",fontWeight:500}},a.a.createElement(g.ChartRow,null,a.a.createElement(g.YAxis,{id:"temperature",label:"Temperature, C",min:this.state.chartData.min("temperature"),max:this.state.chartData.max("temperature"),format:".2f"}),a.a.createElement(g.Charts,null,a.a.createElement(g.LineChart,{axis:"temperature",series:this.state.chartData,columns:["temperature"]}))))))}},{key:"componentDidMount",value:function(){var e=this;this.props.getHistory("temperature",function(t,n){t&&e.setState({chartData:new j.TimeSeries({name:"Historical Temperatures",columns:["time","temperature"],points:n})})})}}]),t}(r.Component)),M=(n(285),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).determineCSS=n.determineCSS.bind(Object(T.a)(Object(T.a)(n))),n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"determineCSS",value:function(){return this.props.children<this.props.minTempThreshold?"cold":this.props.children>this.props.maxTempThreshold?"hot":"good"}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("h1",{className:"data ".concat(this.props.css)},"".concat(this.props.children," C")),a.a.createElement("h3",{className:this.props.css},"Minimum Temperature"),a.a.createElement("div",{className:"adjuster"},a.a.createElement(v,{clickMethod:this.props.decrementMinTempThreshold,disabled:!1},"-"),a.a.createElement(b,{css:this.props.css},this.props.minTempThreshold),a.a.createElement(v,{clickMethod:this.props.incrementMinTempThreshold,disabled:!1},"+")),a.a.createElement("h3",{className:this.props.css},"Maximum Temperature"),a.a.createElement("div",{className:"adjuster"},a.a.createElement(v,{clickMethod:this.props.decrementMaxTempThreshold,disabled:!1},"-"),a.a.createElement(b,{css:this.props.css},this.props.maxTempThreshold),a.a.createElement(v,{clickMethod:this.props.incrementMaxTempThreshold,disabled:!1},"+")))}},{key:"componentDidMount",value:function(){this.props.parentCSS(this.determineCSS())}},{key:"componentDidUpdate",value:function(e){this.props.children!==e.children&&this.props.parentCSS(this.determineCSS())}}]),t}(r.Component)),C=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).state={css:"",modal:!0},n.setCSS=n.setCSS.bind(Object(T.a)(Object(T.a)(n))),n.displayModal=n.displayModal.bind(Object(T.a)(Object(T.a)(n))),n.typeOfSensor=n.typeOfSensor.bind(Object(T.a)(Object(T.a)(n))),n.onModalExitClick=n.onModalExitClick.bind(Object(T.a)(Object(T.a)(n))),n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"setCSS",value:function(e){this.setState({css:e})}},{key:"displayModal",value:function(){return this.state.modal?"Light"===this.props.type?a.a.createElement("div",null,a.a.createElement(O,{onModalExitClick:this.onModalExitClick,getHistory:this.props.getHistory})):a.a.createElement("div",null,a.a.createElement(y,{onModalExitClick:this.onModalExitClick,getHistory:this.props.getHistory})):null}},{key:"onModalExitClick",value:function(){this.setState({modal:!1})}},{key:"typeOfSensor",value:function(){return"Light"===this.props.type?a.a.createElement("div",null,a.a.createElement(k,{parentCSS:this.setCSS,css:this.state.css,threshold:this.props.threshold,incrementThreshold:this.props.incrementThreshold,decrementThreshold:this.props.decrementThreshold},this.props.children)):"Temperature"===this.props.type?a.a.createElement("div",null,a.a.createElement(M,{parentCSS:this.setCSS,css:this.state.css,minTempThreshold:this.props.minTempThreshold,maxTempThreshold:this.props.maxTempThreshold,incrementMinTempThreshold:this.props.incrementMinTempThreshold,decrementMinTempThreshold:this.props.decrementMinTempThreshold,incrementMaxTempThreshold:this.props.incrementMaxTempThreshold,decrementMaxTempThreshold:this.props.decrementMaxTempThreshold},this.props.children)):void 0}},{key:"render",value:function(){return a.a.createElement("div",{className:"sensor ".concat(this.props.type," ").concat(this.state.css)},this.displayModal(),a.a.createElement("h2",{className:"header ".concat(this.state.css)},this.props.type),this.typeOfSensor())}}]),t}(r.Component),x=n(161),S=n.n(x),E="https://agiledevbear.ddns.net:8080",w=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).state={socket:S()(E),light:{value:0,threshold:1e4},temperature:{value:20,minThreshold:16,maxThreshold:24}},n.state.socket.on("tunnel",function(e){var t=JSON.parse(e);if("302CEM/bear/sensor_0/light_1"===t.topic){var r=n.state.light;r.value=t.message,n.setState({light:r})}if("302CEM/bear/sensor_0/temperature_0"===t.topic){var a=n.state.temperature;a.value=t.message,n.setState({temperature:a})}}),n.incrementThreshold=n.incrementThreshold.bind(Object(T.a)(Object(T.a)(n))),n.decrementThreshold=n.decrementThreshold.bind(Object(T.a)(Object(T.a)(n))),n.incrementMinTempThreshold=n.incrementMinTempThreshold.bind(Object(T.a)(Object(T.a)(n))),n.decrementMinTempThreshold=n.decrementMinTempThreshold.bind(Object(T.a)(Object(T.a)(n))),n.incrementMaxTempThreshold=n.incrementMaxTempThreshold.bind(Object(T.a)(Object(T.a)(n))),n.decrementMaxTempThreshold=n.decrementMaxTempThreshold.bind(Object(T.a)(Object(T.a)(n))),n.getHistory=n.getHistory.bind(Object(T.a)(Object(T.a)(n))),n.getLightThreshold=n.getLightThreshold.bind(Object(T.a)(Object(T.a)(n))),n.setLightThreshold=n.setLightThreshold.bind(Object(T.a)(Object(T.a)(n))),n.getMinTempThreshold=n.getMinTempThreshold.bind(Object(T.a)(Object(T.a)(n))),n.setMinTempThreshold=n.setMinTempThreshold.bind(Object(T.a)(Object(T.a)(n))),n.getMaxTempThreshold=n.getMaxTempThreshold.bind(Object(T.a)(Object(T.a)(n))),n.setMaxTempThreshold=n.setMaxTempThreshold.bind(Object(T.a)(Object(T.a)(n))),n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"incrementThreshold",value:function(){var e=this,t=this.state.light;t.threshold=t.threshold+1e3,this.setLightThreshold(t.threshold,function(n){n?(f.toast.error(n.message),console.log(n.messsage)):e.setState({light:t})})}},{key:"decrementThreshold",value:function(){var e=this,t=this.state.light;t.threshold=t.threshold-1e3,this.setLightThreshold(t.threshold,function(n){n?f.toast.error(n.message):e.setState({light:t})})}},{key:"incrementMinTempThreshold",value:function(){var e=this,t=this.state.temperature;t.minThreshold=t.minThreshold+.5,this.setMinTempThreshold(t.minThreshold,function(n){n?f.toast.error(n.message):e.setState({temperature:t})})}},{key:"decrementMinTempThreshold",value:function(){var e=this,t=this.state.temperature;t.minThreshold=t.minThreshold-.5,this.setMinTempThreshold(t.minThreshold,function(n){n?f.toast.error(n.message):e.setState({temperature:t})})}},{key:"incrementMaxTempThreshold",value:function(){var e=this,t=this.state.temperature;t.maxThreshold=t.maxThreshold+.5,this.setMaxTempThreshold(t.maxThreshold,function(n){n?f.toast.error(n.message):e.setState({temperature:t})})}},{key:"decrementMaxTempThreshold",value:function(){var e=this,t=this.state.temperature;t.maxThreshold=t.maxThreshold-.5,this.setMaxTempThreshold(t.maxThreshold,function(n){n?f.toast.error(n.message):e.setState({temperature:t})})}},{key:"getHistory",value:function(){var e=Object(h.a)(c.a.mark(function e(t,n){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=n,e.next=4,fetch("".concat(E,"/api/sensors/history/byType?type=").concat(t),{method:"get"}).then(function(e){if(e.ok)return e.json();throw new Error("Network response was not ok, status code: ".concat(e.status))}).then(function(e){return e});case 4:e.t1=e.sent,(0,e.t0)(null,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),n(e.t2);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getLightThreshold",value:function(){var e=Object(h.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=t,e.next=4,fetch("".concat(E,"/api/sensors/light/threshold?id=0"),{method:"get"}).then(function(e){if(e.ok)return console.log(e),e.json();throw new Error("Network response was not ok, status code: ".concat(e.status))}).then(function(e){return e.threshold});case 4:e.t1=e.sent,(0,e.t0)(null,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),t(e.t2);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"setLightThreshold",value:function(){var e=Object(h.a)(c.a.mark(function e(t,n){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(E,"/api/sensors/light/threshold"),{body:JSON.stringify({id:0,threshold:t}),headers:{"content-type":"application/json"},method:"post"}).then(function(e){if(!e.ok)throw new Error("Network response was not ok, status code: ".concat(e.status))});case 3:n(null),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),n(e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMinTempThreshold",value:function(){var e=Object(h.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=t,e.next=4,fetch("".concat(E,"/api/sensors/temperature/threshold/min?id=1"),{method:"get"}).then(function(e){if(e.ok)return console.log(e),e.json();throw new Error("Network response was not ok, status code: ".concat(e.status))}).then(function(e){return e.threshold});case 4:e.t1=e.sent,(0,e.t0)(null,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),t(e.t2);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"setMinTempThreshold",value:function(){var e=Object(h.a)(c.a.mark(function e(t,n){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(E,"/api/sensors/temperature/threshold/min"),{body:JSON.stringify({id:0,threshold:t}),headers:{"content-type":"application/json"},method:"post"}).then(function(e){if(!e.ok)throw new Error("Network response was not ok, status code: ".concat(e.status))});case 3:n(null),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),n(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMaxTempThreshold",value:function(){var e=Object(h.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=t,e.next=4,fetch("".concat(E,"/api/sensors/temperature/threshold/max?id=1"),{method:"get"}).then(function(e){if(e.ok)return e.json();throw new Error("Network response was not ok, status code: ".concat(e.status))}).then(function(e){return e.threshold});case 4:e.t1=e.sent,(0,e.t0)(null,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),t(e.t2);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"setMaxTempThreshold",value:function(){var e=Object(h.a)(c.a.mark(function e(t,n){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(E,"/api/sensors/temperature/threshold/max"),{body:JSON.stringify({id:1,threshold:t}),headers:{"content-type":"application/json"},method:"post"}).then(function(e){if(!e.ok)throw new Error("Network response was not ok, status code: ".concat(e.status))});case 3:n(null),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),n(e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement(f.ToastContainer,{position:"top-center"}),a.a.createElement("div",{className:"sensorArray"},a.a.createElement(C,{type:"Light",threshold:this.state.light.threshold,incrementThreshold:this.incrementThreshold,decrementThreshold:this.decrementThreshold,getHistory:this.getHistory},this.state.light.value),a.a.createElement(C,{type:"Temperature",minTempThreshold:this.state.temperature.minThreshold,maxTempThreshold:this.state.temperature.maxThreshold,incrementMinTempThreshold:this.incrementMinTempThreshold,decrementMinTempThreshold:this.decrementMinTempThreshold,incrementMaxTempThreshold:this.incrementMaxTempThreshold,decrementMaxTempThreshold:this.decrementMaxTempThreshold,getHistory:this.getHistory},this.state.temperature.value)))}},{key:"componentDidMount",value:function(){var e=this;this.getLightThreshold(function(t,n){if(t)f.toast.error(t.message);else{console.log(n);var r=e.state.light;r.threshold=n,e.setState({light:r})}}),this.getMinTempThreshold(function(t,n){if(t)f.toast.error(t.message);else{console.log(n);var r=e.state.temperature;r.minThreshold=n,e.setState({temperature:r})}}),this.getMaxTempThreshold(function(t,n){if(t)f.toast.error(t.message);else{console.log(n);var r=e.state.temperature;r.maxThreshold=n,e.setState({temperature:r})}})}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[162,1,2]]]);
//# sourceMappingURL=main.8515f0e5.chunk.js.map