(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{145:function(e,t,r){},162:function(e,t,r){e.exports=r(314)},167:function(e,t,r){},182:function(e,t,r){},183:function(e,t,r){},184:function(e,t,r){},185:function(e,t,r){},186:function(e,t,r){},283:function(e,t,r){},284:function(e,t,r){},285:function(e,t,r){},311:function(e,t){},314:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=r(46),i=r.n(s),o=(r(167),r(23)),c=r.n(o),h=r(37),l=r(17),d=r(18),m=r(21),p=r(19),u=r(20),T=r(1),b=r(22),f=(r(181),r(182),r(183),r(184),function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(m.a)(this,Object(p.a)(t).call(this,e))).shortener=r.shortener.bind(Object(T.a)(Object(T.a)(r))),r}return Object(u.a)(t,e),Object(d.a)(t,[{key:"shortener",value:function(){if(this.props.children.toString().length>4){var e=this.props.children/1e3;return e=e.toString().split(".",1),"".concat(e,"k")}return this.props.children}},{key:"render",value:function(){return n.a.createElement("div",{className:"valueDisplay ".concat(this.props.css)},this.shortener())}}]),t}(a.Component)),v=(r(185),function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleButtonClick=r.handleButtonClick.bind(Object(T.a)(Object(T.a)(r))),r.handleCSS=r.handleCSS.bind(Object(T.a)(Object(T.a)(r))),r}return Object(u.a)(t,e),Object(d.a)(t,[{key:"handleButtonClick",value:function(e){e.stopPropagation(),this.props.disabled||this.props.clickMethod()}},{key:"handleCSS",value:function(){return"-"===this.props.children?"red":"green"}},{key:"render",value:function(){var e=this.handleCSS();return n.a.createElement("div",{onClick:this.handleButtonClick,className:"btn-wrapper ".concat(e)},this.props.children)}}]),t}(a.Component)),k=(r(186),function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(m.a)(this,Object(p.a)(t).call(this,e))).shortener=r.shortener.bind(Object(T.a)(Object(T.a)(r))),r.determineCSS=r.determineCSS.bind(Object(T.a)(Object(T.a)(r))),r}return Object(u.a)(t,e),Object(d.a)(t,[{key:"shortener",value:function(){if(this.props.children.toString().length>4){var e=this.props.children/1e3;return e=e.toString().split(".",1),"".concat(e,"k")}return this.props.children}},{key:"determineCSS",value:function(){return this.props.children<5e5?"dark":"light"}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("h1",{className:"data ".concat(this.props.css)},this.shortener()),n.a.createElement("h3",{className:this.props.css},"Activation Threshold"),n.a.createElement("div",{className:"adjuster"},n.a.createElement(v,{clickMethod:this.props.decrementThreshold,disabled:!1},"-"),n.a.createElement(f,{css:this.props.css},this.props.threshold),n.a.createElement(v,{clickMethod:this.props.incrementThreshold,disabled:!1},"+")))}},{key:"componentDidMount",value:function(){this.props.parentCSS(this.determineCSS())}},{key:"componentDidUpdate",value:function(e){this.props.children!==e.children&&this.props.parentCSS(this.determineCSS())}}]),t}(a.Component)),j=r(27),O=r(14),g=(r(145),r(283),function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={chartData:new O.TimeSeries({name:"Historical Light",columns:["time","light"],points:[[new Date,0]]}),failed:!1},r.handleModalExitClick=r.handleModalExitClick.bind(Object(T.a)(Object(T.a)(r))),r.handleModalContentClick=r.handleModalContentClick.bind(Object(T.a)(Object(T.a)(r))),r}return Object(u.a)(t,e),Object(d.a)(t,[{key:"handleModalExitClick",value:function(e){this.props.onModalExitClick()}},{key:"handleModalContentClick",value:function(e){return e.stopPropagation(),null}},{key:"render",value:function(){return this.state.failed?n.a.createElement("div",{className:"modal",onClick:this.handleModalExitClick},n.a.createElement("div",{className:"modalContent",onClick:this.handleModalContentClick},n.a.createElement("h2",{className:"modalText"},"Could not load graph, try again later"))):n.a.createElement("div",{className:"modal",onClick:this.handleModalExitClick},n.a.createElement("div",{className:"modalContent",onClick:this.handleModalContentClick},n.a.createElement(j.ChartContainer,{timeRange:this.state.chartData.range(),title:"Historical Light Level",titleStyle:{fill:"#555",fontWeight:500}},n.a.createElement(j.ChartRow,null,n.a.createElement(j.YAxis,{id:"light",label:"Light Level",min:this.state.chartData.min("light"),max:this.state.chartData.max("light")}),n.a.createElement(j.Charts,null,n.a.createElement(j.LineChart,{axis:"light",series:this.state.chartData,columns:["light"]}))))))}},{key:"componentDidMount",value:function(){var e=this;this.props.getHistory("light",function(t,r){t?(b.toast.error(t.message),e.setState({failed:!0})):e.setState({chartData:new O.TimeSeries({name:"Historical Light",columns:["time","light"],points:r.map(function(e){return[new Date(e.timestamp),e.value]})})})})}}]),t}(a.Component)),x=(r(284),function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={chartData:new O.TimeSeries({name:"Historical Temperatures",columns:["time","temperature"],points:[[new Date,0]]}),failed:!1},r.handleModalExitClick=r.handleModalExitClick.bind(Object(T.a)(Object(T.a)(r))),r.handleModalContentClick=r.handleModalContentClick.bind(Object(T.a)(Object(T.a)(r))),r}return Object(u.a)(t,e),Object(d.a)(t,[{key:"handleModalExitClick",value:function(e){this.props.onModalExitClick()}},{key:"handleModalContentClick",value:function(e){return e.stopPropagation(),null}},{key:"render",value:function(){return this.state.failed?n.a.createElement("div",{className:"modal",onClick:this.handleModalExitClick},n.a.createElement("div",{className:"modalContent",onClick:this.handleModalContentClick},n.a.createElement("h2",{className:"modalText"},"Could not load graph, try again later"))):n.a.createElement("div",{className:"modal",onClick:this.handleModalExitClick},n.a.createElement("div",{className:"modalContent",onClick:this.handleModalContentClick},n.a.createElement(j.ChartContainer,{timeRange:this.state.chartData.timerange(),title:"Historical Temperature Level",titleStyle:{fill:"#555",fontWeight:500}},n.a.createElement(j.ChartRow,null,n.a.createElement(j.YAxis,{id:"temperature",label:"Temperature, C",min:this.state.chartData.min("temperature"),max:this.state.chartData.max("temperature"),format:".2f"}),n.a.createElement(j.Charts,null,n.a.createElement(j.LineChart,{axis:"temperature",series:this.state.chartData,columns:["temperature"]}))))))}},{key:"componentDidMount",value:function(){var e=this;this.props.getHistory("temperature",function(t,r){t?(b.toast.error(t.message),e.setState({failed:!0})):e.setState({chartData:new O.TimeSeries({name:"Historical Temperature",columns:["time","temperature"],points:r.map(function(e){return[new Date(e.timestamp),e.value]})})})})}}]),t}(a.Component)),C=(r(285),function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(m.a)(this,Object(p.a)(t).call(this,e))).determineCSS=r.determineCSS.bind(Object(T.a)(Object(T.a)(r))),r}return Object(u.a)(t,e),Object(d.a)(t,[{key:"determineCSS",value:function(){return this.props.children<this.props.minTempThreshold?"cold":this.props.children>this.props.maxTempThreshold?"hot":"good"}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("h1",{className:"data ".concat(this.props.css)},"".concat(this.props.children," C")),n.a.createElement("h3",{className:this.props.css},"Minimum Temperature"),n.a.createElement("div",{className:"adjuster"},n.a.createElement(v,{clickMethod:this.props.decrementMinTempThreshold,disabled:!1},"-"),n.a.createElement(f,{css:this.props.css},this.props.minTempThreshold),n.a.createElement(v,{clickMethod:this.props.incrementMinTempThreshold,disabled:!1},"+")),n.a.createElement("h3",{className:this.props.css},"Maximum Temperature"),n.a.createElement("div",{className:"adjuster"},n.a.createElement(v,{clickMethod:this.props.decrementMaxTempThreshold,disabled:!1},"-"),n.a.createElement(f,{css:this.props.css},this.props.maxTempThreshold),n.a.createElement(v,{clickMethod:this.props.incrementMaxTempThreshold,disabled:!1},"+")))}},{key:"componentDidMount",value:function(){this.props.parentCSS(this.determineCSS())}},{key:"componentDidUpdate",value:function(e){this.props.children!==e.children&&this.props.parentCSS(this.determineCSS())}}]),t}(a.Component)),M=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={css:"",modal:!1},r.setCSS=r.setCSS.bind(Object(T.a)(Object(T.a)(r))),r.displayModal=r.displayModal.bind(Object(T.a)(Object(T.a)(r))),r.typeOfSensor=r.typeOfSensor.bind(Object(T.a)(Object(T.a)(r))),r.onModalExitClick=r.onModalExitClick.bind(Object(T.a)(Object(T.a)(r))),r.modalOn=r.modalOn.bind(Object(T.a)(Object(T.a)(r))),r}return Object(u.a)(t,e),Object(d.a)(t,[{key:"setCSS",value:function(e){this.setState({css:e})}},{key:"displayModal",value:function(){return this.state.modal?"Light"===this.props.type?n.a.createElement("div",null,n.a.createElement(g,{onModalExitClick:this.onModalExitClick,getHistory:this.props.getHistory})):n.a.createElement("div",null,n.a.createElement(x,{onModalExitClick:this.onModalExitClick,getHistory:this.props.getHistory})):null}},{key:"onModalExitClick",value:function(){this.setState({modal:!1})}},{key:"modalOn",value:function(){this.setState({modal:!0})}},{key:"typeOfSensor",value:function(){return"Light"===this.props.type?n.a.createElement("div",null,n.a.createElement(k,{parentCSS:this.setCSS,css:this.state.css,threshold:this.props.threshold,incrementThreshold:this.props.incrementThreshold,decrementThreshold:this.props.decrementThreshold},this.props.children)):"Temperature"===this.props.type?n.a.createElement("div",null,n.a.createElement(C,{parentCSS:this.setCSS,css:this.state.css,minTempThreshold:this.props.minTempThreshold,maxTempThreshold:this.props.maxTempThreshold,incrementMinTempThreshold:this.props.incrementMinTempThreshold,decrementMinTempThreshold:this.props.decrementMinTempThreshold,incrementMaxTempThreshold:this.props.incrementMaxTempThreshold,decrementMaxTempThreshold:this.props.decrementMaxTempThreshold},this.props.children)):void 0}},{key:"render",value:function(){return n.a.createElement("div",{className:"sensor ".concat(this.props.type," ").concat(this.state.css)},this.displayModal(),n.a.createElement("h2",{className:"header ".concat(this.state.css)},this.props.type),this.typeOfSensor(),n.a.createElement("div",{className:"button-menu"},n.a.createElement(v,{clickMethod:this.modalOn,disabled:!1},"Show Historical Data")))}}]),t}(a.Component),y=r(161),E=r.n(y),S="https://agiledevbear.ddns.net:8080",w=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={socket:E()(S),light:{value:0,threshold:1e4},temperature:{value:20,minThreshold:16,maxThreshold:24}},r.state.socket.on("tunnel",function(e){var t=JSON.parse(e);if("302CEM/bear/sensor_light/sensor_0"===t.topic){var a=r.state.light;a.value=t.message,r.setState({light:a})}if("302CEM/bear/sensor_temperature/sensor_1"===t.topic){var n=r.state.temperature;n.value=t.message,r.setState({temperature:n})}}),r.incrementThreshold=r.incrementThreshold.bind(Object(T.a)(Object(T.a)(r))),r.decrementThreshold=r.decrementThreshold.bind(Object(T.a)(Object(T.a)(r))),r.incrementMinTempThreshold=r.incrementMinTempThreshold.bind(Object(T.a)(Object(T.a)(r))),r.decrementMinTempThreshold=r.decrementMinTempThreshold.bind(Object(T.a)(Object(T.a)(r))),r.incrementMaxTempThreshold=r.incrementMaxTempThreshold.bind(Object(T.a)(Object(T.a)(r))),r.decrementMaxTempThreshold=r.decrementMaxTempThreshold.bind(Object(T.a)(Object(T.a)(r))),r.getHistory=r.getHistory.bind(Object(T.a)(Object(T.a)(r))),r.getLightThreshold=r.getLightThreshold.bind(Object(T.a)(Object(T.a)(r))),r.setLightThreshold=r.setLightThreshold.bind(Object(T.a)(Object(T.a)(r))),r.getMinTempThreshold=r.getMinTempThreshold.bind(Object(T.a)(Object(T.a)(r))),r.setMinTempThreshold=r.setMinTempThreshold.bind(Object(T.a)(Object(T.a)(r))),r.getMaxTempThreshold=r.getMaxTempThreshold.bind(Object(T.a)(Object(T.a)(r))),r.setMaxTempThreshold=r.setMaxTempThreshold.bind(Object(T.a)(Object(T.a)(r))),r}return Object(u.a)(t,e),Object(d.a)(t,[{key:"incrementThreshold",value:function(){var e=this,t=this.state.light;t.threshold=t.threshold+1e3,this.setLightThreshold(t.threshold,function(r){r?b.toast.error(r.message):e.setState({light:t})})}},{key:"decrementThreshold",value:function(){var e=this,t=this.state.light;t.threshold=t.threshold-1e3,this.setLightThreshold(t.threshold,function(r){r?b.toast.error(r.message):e.setState({light:t})})}},{key:"incrementMinTempThreshold",value:function(){var e=this,t=this.state.temperature;t.minThreshold=t.minThreshold+.5,this.setMinTempThreshold(t.minThreshold,function(r){r?b.toast.error(r.message):e.setState({temperature:t})})}},{key:"decrementMinTempThreshold",value:function(){var e=this,t=this.state.temperature;t.minThreshold=t.minThreshold-.5,this.setMinTempThreshold(t.minThreshold,function(r){r?b.toast.error(r.message):e.setState({temperature:t})})}},{key:"incrementMaxTempThreshold",value:function(){var e=this,t=this.state.temperature;t.maxThreshold=t.maxThreshold+.5,this.setMaxTempThreshold(t.maxThreshold,function(r){r?b.toast.error(r.message):e.setState({temperature:t})})}},{key:"decrementMaxTempThreshold",value:function(){var e=this,t=this.state.temperature;t.maxThreshold=t.maxThreshold-.5,this.setMaxTempThreshold(t.maxThreshold,function(r){r?b.toast.error(r.message):e.setState({temperature:t})})}},{key:"getHistory",value:function(){var e=Object(h.a)(c.a.mark(function e(t,r){var a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(S,"/api/sensors/history/byType?type=").concat(t),{method:"get"});case 3:return a=e.sent,e.next=6,a.json();case 6:if(n=e.sent,a.ok){e.next=9;break}throw new Error("Error: ".concat(n.error));case 9:r(null,n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t,r){return e.apply(this,arguments)}}()},{key:"getLightThreshold",value:function(){var e=Object(h.a)(c.a.mark(function e(t){var r,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(S,"/api/sensors/light/threshold?id=0"),{method:"get"});case 3:return r=e.sent,e.next=6,r.json();case 6:if(a=e.sent,r.ok){e.next=9;break}throw new Error("Error: ".concat(a.error));case 9:t(null,a.threshold),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()},{key:"setLightThreshold",value:function(){var e=Object(h.a)(c.a.mark(function e(t,r){var a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(S,"/api/sensors/light/threshold"),{body:JSON.stringify({id:0,threshold:t}),headers:{"content-type":"application/json"},method:"post"});case 3:if((a=e.sent).ok){e.next=9;break}return e.next=7,a.json();case 7:throw n=e.sent,new Error("Error: ".concat(n.error));case 9:r(null),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMinTempThreshold",value:function(){var e=Object(h.a)(c.a.mark(function e(t){var r,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(S,"/api/sensors/temperature/threshold/min?id=1"),{method:"get"});case 3:return r=e.sent,e.next=6,r.json();case 6:if(a=e.sent,r.ok){e.next=9;break}throw new Error("Error: ".concat(a.error));case 9:t(null,a.threshold),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()},{key:"setMinTempThreshold",value:function(){var e=Object(h.a)(c.a.mark(function e(t,r){var a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(S,"/api/sensors/temperature/threshold/min"),{body:JSON.stringify({id:1,threshold:t}),headers:{"content-type":"application/json"},method:"post"});case 3:if((a=e.sent).ok){e.next=9;break}return e.next=7,a.json();case 7:throw n=e.sent,new Error("Error: ".concat(n.error));case 9:r(null),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMaxTempThreshold",value:function(){var e=Object(h.a)(c.a.mark(function e(t){var r,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(S,"/api/sensors/temperature/threshold/max?id=1"),{method:"get"});case 3:return r=e.sent,e.next=6,r.json();case 6:if(a=e.sent,r.ok){e.next=9;break}throw new Error("Error: ".concat(a.error));case 9:t(null,a.threshold),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()},{key:"setMaxTempThreshold",value:function(){var e=Object(h.a)(c.a.mark(function e(t,r){var a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(S,"/api/sensors/temperature/threshold/max"),{body:JSON.stringify({id:1,threshold:t}),headers:{"content-type":"application/json"},method:"post"});case 3:if((a=e.sent).ok){e.next=9;break}return e.next=7,a.json();case 7:throw n=e.sent,new Error("Error: ".concat(n.error));case 9:r(null),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(b.ToastContainer,{position:"top-center"}),n.a.createElement("div",{className:"sensorArray"},n.a.createElement(M,{type:"Light",threshold:this.state.light.threshold,incrementThreshold:this.incrementThreshold,decrementThreshold:this.decrementThreshold,getHistory:this.getHistory},this.state.light.value),n.a.createElement(M,{type:"Temperature",minTempThreshold:this.state.temperature.minThreshold,maxTempThreshold:this.state.temperature.maxThreshold,incrementMinTempThreshold:this.incrementMinTempThreshold,decrementMinTempThreshold:this.decrementMinTempThreshold,incrementMaxTempThreshold:this.incrementMaxTempThreshold,decrementMaxTempThreshold:this.decrementMaxTempThreshold,getHistory:this.getHistory},this.state.temperature.value)))}},{key:"componentDidMount",value:function(){var e=this;this.getLightThreshold(function(t,r){if(t)b.toast.error(t.message);else{var a=e.state.light;a.threshold=r,e.setState({light:a})}}),this.getMinTempThreshold(function(t,r){if(t)b.toast.error(t.message);else{var a=e.state.temperature;a.minThreshold=r,e.setState({temperature:a})}}),this.getMaxTempThreshold(function(t,r){if(t)b.toast.error(t.message);else{var a=e.state.temperature;a.maxThreshold=r,e.setState({temperature:a})}})}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[162,1,2]]]);
//# sourceMappingURL=main.f0aeb2b1.chunk.js.map